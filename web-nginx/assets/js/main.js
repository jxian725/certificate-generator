function viewImage(e){window.open(e.src,"_blank").focus()}!function(){"use strict";var e,t,n,i=document.querySelector("body");!function(){function e(e){this.el=e;for(var t=e.className.replace(/^\s+|\s+$/g,"").split(/\s+/),i=0;i<t.length;i++)n.call(this,t[i])}if(void 0!==window.Element&&!("classList"in document.documentElement)){var t=Array.prototype,n=t.push,i=t.splice,o=t.join;e.prototype={add:function(e){this.contains(e)||(n.call(this,e),this.el.className=this.toString())},contains:function(e){return-1!=this.el.className.indexOf(e)},item:function(e){return this[e]||null},remove:function(e){if(this.contains(e)){for(var t=0;t<this.length&&this[t]!=e;t++);i.call(this,t,1),this.el.className=this.toString()}},toString:function(){return o.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},window.DOMTokenList=e,function(e,t,n){Object.defineProperty?Object.defineProperty(e,t,{get:n}):e.__defineGetter__(t,n)}(Element.prototype,"classList",(function(){return new e(this)}))}}(),window.canUse=function(e){window._canUse||(window._canUse=document.createElement("div"));var t=window._canUse.style,n=e.charAt(0).toUpperCase()+e.slice(1);return e in t||"Moz"+n in t||"Webkit"+n in t||"O"+n in t||"ms"+n in t},"addEventListener"in window||(window.addEventListener=function(e,t){window.attachEvent("on"+e,t)}),window.addEventListener("load",(function(){window.setTimeout((function(){i.classList.remove("is-preload")}),100)})),function(){var e,t,n,o={images:{"/assets/images/bg01.jpg":"center","/assets/images/bg02.jpg":"center","/assets/images/bg03.jpg":"center"},delay:6e3},s=0,a=0,c=[];for(n in(e=document.createElement("div")).id="bg",i.appendChild(e),o.images)(t=document.createElement("div")).style.backgroundImage='url("'+n+'")',t.style.backgroundPosition=o.images[n],e.appendChild(t),c.push(t);c[s].classList.add("visible"),c[s].classList.add("top"),1!=c.length&&canUse("transition")&&window.setInterval((function(){a=s,++s>=c.length&&(s=0),c[a].classList.remove("top"),c[s].classList.add("visible"),c[s].classList.add("top"),window.setTimeout((function(){c[a].classList.remove("visible")}),o.delay/2)}),o.delay)}(),t=document.querySelectorAll("#query-form")[0],n=document.querySelectorAll('#query-form input[type="submit"]')[0],"addEventListener"in t&&((e=document.createElement("span")).classList.add("message"),t.appendChild(e),e._show=function(t,n){e.innerHTML=n,e.classList.add(t),e.classList.add("visible"),window.setTimeout((function(){e._hide()}),3e3)},e._hide=function(){e.classList.remove("visible")},t.addEventListener("submit",(function(t){t.stopPropagation(),t.preventDefault(),e._hide(),n.disabled=!0;let i=document.getElementById("country").value,o=document.getElementById("query").value.trim(),s="";return""===i?(e._show("failure","Please select your country/region."),void(n.disabled=!1)):""===o?(e._show("failure","Please fill in with either one combination."),void(n.disabled=!1)):o.length<3?(e._show("failure","Invalid combination."),void(n.disabled=!1)):(s=o.includes("@")?`{"country":"${i}","email":"${o}"}`:o.length>=30&&!o.includes(" ")?`{"country":"${i}","accountId":"${o}"}`:`{"country":"${i}","name":"${o}"}`,void fetch("/api/participant/query",{method:"POST",headers:{"Content-Type":"application/json"},body:s}).then((e=>e.json())).then((t=>{if("success"!==t.status)return e._show("failure","No matching result found."),void(n.disabled=!1);!function(t){let i=document.getElementById("certModal");document.getElementsByClassName("certClose")[0].onclick=function(){i.style.display="none",document.getElementById("cert-frame").src="",document.getElementById("download-icon").alt=""},window.onclick=function(e){e.target==i&&(i.style.display="none",document.getElementById("cert-frame").src="",document.getElementById("download-icon").alt="")},fetch(`/api/generate/${t.id}`,{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>{let o=`data:image/png;base64,${t.blob}`;document.getElementById("cert-frame").src=o,document.getElementById("download-icon").alt=t.url,e._show("success","Certificate generated successfully."),n.disabled=!1,i.style.display="block"})).catch((t=>{console.error("Error:",t),e._show("failure","Error. Please try again later2."),n.disabled=!1})),document.querySelectorAll("#certModal .action-bar")[0].onclick=function(){const e=document.createElement("a");e.href=document.getElementById("download-icon").alt,e.download=e.href.split("/").pop(),document.body.appendChild(e),e.click(),document.body.removeChild(e)}}(t.data)})).catch((t=>{console.error("Error:",t),e._show("failure","Error. Please try again later."),n.disabled=!1})))}))),function(){let e=document.getElementById("hintModal"),t=document.getElementById("viewGuide"),n=document.getElementsByClassName("close")[0];t.onclick=function(){e.style.display="block"},n.onclick=function(){e.style.display="none"},window.onclick=function(t){t.target==e&&(e.style.display="none")}}()}();